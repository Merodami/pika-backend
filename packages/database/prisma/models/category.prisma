/// Category - Hierarchical categorization system
model Category {
  id          String    @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  name        Json      @db.JsonB // Multilingual: { en: "Food", es: "Comida", gn: "Tembi'u" }
  description Json?     @db.JsonB // Multilingual description
  icon        String?   @db.VarChar(255) // Icon URL or identifier
  parentId    String?   @map("parent_id") @db.Uuid // Self-referencing for hierarchy
  isActive    Boolean   @default(true) @map("is_active")
  sortOrder   Int       @default(0) @map("sort_order")
  createdAt   DateTime  @default(now()) @map("created_at") @db.Timestamptz(6)
  updatedAt   DateTime? @default(now()) @map("updated_at") @db.Timestamptz(6) @updatedAt
  deletedAt   DateTime? @map("deleted_at") @db.Timestamptz(6)

  // Relations
  parent      Category?  @relation("CategoryHierarchy", fields: [parentId], references: [id])
  children    Category[] @relation("CategoryHierarchy")

  // Indexes
  @@index([parentId])
  @@index([isActive, deletedAt])
  @@index([sortOrder])
  @@index([name(ops: JsonbPathOps)], type: Gin)

  @@map("categories")
  @@schema("public")
}